# 新增/更新/复制自动分派任务

> URL: 127.0.0.1:8080/api/scrm/assignment/addOrUpdate
>
> Origin Url: 127.0.0.1:8080/api/scrm/assignment/addOrUpdate
>
> Type: POST


### Request headers

|Header Name| Header Value|
|---------|------|
|ff|6df024ca237d47549d57a894f43d8ea3|
|x-token|54966bd2b2d2427ebbb318578b11678e|

### Parameters

##### Path parameters

| Parameter | Type | Value | Description |
|---------|------|------|------------|


##### URL parameters

|Required| Parameter | Type | Value | Description |
|---------|---------|------|------|------------|
|true||String|||


##### Body parameters

###### JSON

```
{
  "assignDetail": [
    {
      "belongTo": "1696047787196674048",
      "departmentId": "1692004954425409536",
      "employeeLabelIds": [111111,222222]
    }
  ],
  "assignType": 1,
  "groupIds": [
    "1692004576560562176",
    "1692004595283935232",
    "1692004648052473856",
    "1692004682106028032",
    "1692004665182011392",
    "1695998967712706560",
    "1695998924561707008"
  ],
  "id": "1716342294528245760",
  "namelistStatus": [
    "1"
  ],
  "recycleRuleId": "1692008717643038720",
  "ruleName": "其他首次待分派",
  "sortType": 0,
  "targetType": 4,
  "validType": 1
}
```

###### JSON document

```
{
	"customerGroupId":"分组列表(t_list_group_cfg.id列表)",
	"recycleAfter":"后处理时间(-1不限、0当天、1天、3天、5天、7天、15天、30天)",
	"validType":"认为有效类型（1永久有效 2自定义）",
	"assignType":"名单分派模式（1从分组分派/2直接分派）",
	"remark":"任务说明",
	"targetType":"分派类型（1到座席/0到部门/2到智能外呼/3到预测外呼）",
	"inRuleIds":"入库规则列表(t_list_in_rule_cfg.id列表)",
	"validPeriodBegin":"任务有效时间开始（永久有效时设datetime最小值）",
	"ruleCode":"任务code",
	"assignDetail":[
		{
			"assignRate":"分派比例（t_list_assign_cfg.rule_type=1时有效）",
			"departmentId":"归属部门ID",
			"belongToSmartCallTempId":"归属智能外呼模板ID",
			"belongTo":"归属座席ID",
			"assignNum":"分配条数（t_list_assign_cfg.rule_type=2时有效）"
		}
	],
	"namelistStatus":"名单状态列表",
	"sortType":"排序规则(0:轮循)",
	"ruleType":"分派规则（1按比例/2按数量）",
	"recycleRuleId":"回收规则（分派到座席时有效） t_list_assign_recycle_cfg.id",
	"ruleName":"任务名称",
	"validPeriodEnd":"任务有效时间结束（永久有效时设datetime最大值）",
	"id":"No comment,Value =id_eprdu"
}
```


##### Form URL-Encoded
|Required| Parameter | Type | Value | Description |
|---------|---------|------|------|------------|


##### Multipart
|Required | Parameter | Type | Value | Description |
|---------|---------|------|------|------------|


### Response

##### Response example

```
{
  "returnCode": "501",
  "returnMsg": "直接分派时，分组id不能传",
  "result": null
}
```

##### Response document
```
{
	"result":{},
	"returnCode":"No comment,Type =String",
	"returnMsg":"No comment,Type =String"
}
```


